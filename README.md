# Вестник Сыктывкарского университета

Установка и запуск для разработки
-------------
- Установите [VirtualBox](https://www.virtualbox.org/wiki/Downloads)
- Установите [Vagrant](https://www.vagrantup.com/downloads.html)
- Склонируйте этот проект
- Перейдите в директорию с клонированного проекта
- Выполните `vagrant up`

В результате будет развёрнута виртуальная машина готовая для запуска проекта.

Виртуальная машина содержит:
- Ruby (version 2.3)
- NodeJS (version 8.10.0)
- MySQL
- дополнительные системные пакеты для запуска приложения.

Выполните `vagrant ssh`, а затем `bundle install` в терминале виртуальной машины для установки ruby gem-ов.

Настройка frontend-а
------
Установка npm-пакетов (зависимостей, необходимых для сборки frontend-а):
```
make npm
```

Сборка единого JS файла, содержащего frontend приложения, и помещение его в директорию `public`:
```
make webpack
```

#### Разработка с hot reload:
Запуск `webpack-dev-server` на порту `8080` (необходимо выполнять на хостовой машине, так как внутри виртуальной машины пересборка frontend-а выполняется долго):
```
make webpack-dev
```

Запуск `Ruby on Rails` (backend-а приложения):
------
Перед запуском необходимо выполнить команду для выполнения миграции базы данных (создание необходимых таблиц):
```
make migrate
```
Также, возможно, необходимо создать пользователя с ролью `redactor`. Для этого выполните команду (rake задачу):
```
rake create_redactor
```
Существует возможность задать пароль, e-mail и ФИО пользователя, для этого необходимо передать аргументы в rake задачу, например:
```
rake create_redactor['Пароль','example@example.ru','ФИО']
```
при этом все аргументы являются необязательными (можно задать ноль, один, два или три аргумента), их порядок не может меняться, каждый из них должен быть в апострофах и они имеют следующие ограничения:
- Первый аргумент (пароль) должен иметь длину минимум в 6 символов
- Второй аргумент (e-mail) должен быть в формате электронной почты или равняться строке `redactor`
- Третий аргуметр (ФИО) не имеет специальных ограницений

Если вы собрали frontend с помощью `make webpack`, то запуск необходимо осуществить с помощью команды:
```
make run-dev
```

Если вы запустили `webpack-dev-server`, то необходимо выполнить команду:
```
make run-dev
```
